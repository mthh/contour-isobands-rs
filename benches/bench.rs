#![feature(test)]
extern crate contour_isobands;
extern crate test;

use test::{black_box, Bencher};

use contour_isobands::isobands_test;
use contour_isobands::isobands_test_quadtree;

#[bench]
fn bench_isobands_no_quadtree(b: &mut Bencher) {
    let matrix = vec![
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
    ];

    b.iter(|| black_box(isobands_test(&matrix, &vec![4.5, 8.]).unwrap()));
}

#[bench]
fn bench_isobands_quadtree(b: &mut Bencher) {
    let matrix = vec![
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![9., 4., 1., 12., 1., 4., 9., 9., 4., 1., 12., 1., 4., 9.],
        vec![10., 5., 2., 1., 2., 5., 10., 10., 5., 2., 1., 2., 5., 10.],
        vec![13., 8., 5., 4., 5., 8., 13., 13., 8., 5., 4., 5., 8., 13.],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
        vec![
            18., 13., 10., 9., 10., 13., 18., 18., 13., 10., 9., 10., 13., 18.,
        ],
    ];

    b.iter(|| black_box(isobands_test_quadtree(&matrix, &vec![4.5, 8.]).unwrap()));
}
